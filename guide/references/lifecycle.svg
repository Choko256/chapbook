<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: %3 Pages: 1 -->
<svg width="923pt" height="1052pt"
 viewBox="0.00 0.00 922.91 1051.62" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1047.6191)">
<title>%3</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1047.6191 918.9087,-1047.6191 918.9087,4 -4,4"/>
<!-- loadPage -->
<g id="node1" class="node">
<title>loadPage</title>
<path fill="none" stroke="#000000" d="M848.843,-1043.6191C848.843,-1043.6191 734.9744,-1043.6191 734.9744,-1043.6191 728.9744,-1043.6191 722.9744,-1037.6191 722.9744,-1031.6191 722.9744,-1031.6191 722.9744,-1019.6191 722.9744,-1019.6191 722.9744,-1013.6191 728.9744,-1007.6191 734.9744,-1007.6191 734.9744,-1007.6191 848.843,-1007.6191 848.843,-1007.6191 854.843,-1007.6191 860.843,-1013.6191 860.843,-1019.6191 860.843,-1019.6191 860.843,-1031.6191 860.843,-1031.6191 860.843,-1037.6191 854.843,-1043.6191 848.843,-1043.6191"/>
<text text-anchor="middle" x="791.9087" y="-1022.1198" font-family="Palatino" font-size="14.00" fill="#000000">Browser loads page</text>
</g>
<!-- setDefaults -->
<g id="node2" class="node">
<title>setDefaults</title>
<polygon fill="none" stroke="#000000" points="863.2291,-970.6191 720.5883,-970.6191 720.5883,-934.6191 863.2291,-934.6191 863.2291,-970.6191"/>
<text text-anchor="middle" x="791.9087" y="-949.1198" font-family="Palatino" font-size="14.00" fill="#000000">State defaults are set</text>
</g>
<!-- loadPage&#45;&gt;setDefaults -->
<g id="edge1" class="edge">
<title>loadPage&#45;&gt;setDefaults</title>
<path fill="none" stroke="#000000" d="M791.9087,-1007.5742C791.9087,-999.502 791.9087,-989.7955 791.9087,-980.8009"/>
<polygon fill="#000000" stroke="#000000" points="795.4088,-980.7095 791.9087,-970.7095 788.4088,-980.7095 795.4088,-980.7095"/>
</g>
<!-- loadDom -->
<g id="node3" class="node">
<title>loadDom</title>
<polygon fill="none" stroke="#000000" points="913.7027,-897.521 670.1147,-897.521 670.1147,-858.9145 913.7027,-858.9145 913.7027,-897.521"/>
<text text-anchor="middle" x="791.9087" y="-882.4191" font-family="Palatino" font-size="14.00" fill="#000000">Story loads from DOM data</text>
<text text-anchor="middle" x="791.9087" y="-867.0178" font-family="Palatino" font-size="14.00" fill="#000000">and trail is defaulted to start passage</text>
</g>
<!-- setDefaults&#45;&gt;loadDom -->
<g id="edge2" class="edge">
<title>setDefaults&#45;&gt;loadDom</title>
<path fill="none" stroke="#000000" d="M791.9087,-934.6086C791.9087,-926.5718 791.9087,-916.8894 791.9087,-907.8334"/>
<polygon fill="#000000" stroke="#000000" points="795.4088,-907.6262 791.9087,-897.6262 788.4088,-907.6262 795.4088,-907.6262"/>
</g>
<!-- restoreState -->
<g id="node4" class="node">
<title>restoreState</title>
<polygon fill="none" stroke="#000000" points="898.2713,-821.7183 685.5461,-821.7183 685.5461,-783.1118 898.2713,-783.1118 898.2713,-821.7183"/>
<text text-anchor="middle" x="791.9087" y="-806.6164" font-family="Palatino" font-size="14.00" fill="#000000">State restores from local storage</text>
<text text-anchor="middle" x="791.9087" y="-791.215" font-family="Palatino" font-size="14.00" fill="#000000">if possible</text>
</g>
<!-- loadDom&#45;&gt;restoreState -->
<g id="edge3" class="edge">
<title>loadDom&#45;&gt;restoreState</title>
<path fill="none" stroke="#000000" d="M791.9087,-858.6967C791.9087,-850.5621 791.9087,-840.9372 791.9087,-831.9684"/>
<polygon fill="#000000" stroke="#000000" points="795.4088,-831.8699 791.9087,-821.87 788.4088,-831.87 795.4088,-831.8699"/>
</g>
<!-- addStyle -->
<g id="node5" class="node">
<title>addStyle</title>
<polygon fill="none" stroke="#000000" points="882.5992,-746.0137 701.2182,-746.0137 701.2182,-710.0137 882.5992,-710.0137 882.5992,-746.0137"/>
<text text-anchor="middle" x="791.9087" y="-724.5144" font-family="Palatino" font-size="14.00" fill="#000000">Custom story styles added</text>
</g>
<!-- restoreState&#45;&gt;addStyle -->
<g id="edge4" class="edge">
<title>restoreState&#45;&gt;addStyle</title>
<path fill="none" stroke="#000000" d="M791.9087,-782.867C791.9087,-774.7862 791.9087,-765.2587 791.9087,-756.4312"/>
<polygon fill="#000000" stroke="#000000" points="795.4088,-756.1548 791.9087,-746.1548 788.4088,-756.1548 795.4088,-756.1548"/>
</g>
<!-- addScript -->
<g id="node6" class="node">
<title>addScript</title>
<polygon fill="none" stroke="#000000" points="876.4172,-673.0137 707.4002,-673.0137 707.4002,-637.0137 876.4172,-637.0137 876.4172,-673.0137"/>
<text text-anchor="middle" x="791.9087" y="-651.5144" font-family="Palatino" font-size="14.00" fill="#000000">Custom story scripts run</text>
</g>
<!-- addStyle&#45;&gt;addScript -->
<g id="edge5" class="edge">
<title>addStyle&#45;&gt;addScript</title>
<path fill="none" stroke="#000000" d="M791.9087,-709.9687C791.9087,-701.8965 791.9087,-692.19 791.9087,-683.1954"/>
<polygon fill="#000000" stroke="#000000" points="795.4088,-683.104 791.9087,-673.104 788.4088,-683.1041 795.4088,-683.104"/>
</g>
<!-- setPassageVars -->
<g id="node7" class="node">
<title>setPassageVars</title>
<polygon fill="none" stroke="#000000" points="895.7593,-600.0137 688.0581,-600.0137 688.0581,-564.0137 895.7593,-564.0137 895.7593,-600.0137"/>
<text text-anchor="middle" x="791.9087" y="-578.5144" font-family="Palatino" font-size="14.00" fill="#000000">Passage at end of trail sets vars</text>
</g>
<!-- addScript&#45;&gt;setPassageVars -->
<g id="edge6" class="edge">
<title>addScript&#45;&gt;setPassageVars</title>
<path fill="none" stroke="#000000" d="M791.9087,-636.9687C791.9087,-628.8965 791.9087,-619.19 791.9087,-610.1954"/>
<polygon fill="#000000" stroke="#000000" points="795.4088,-610.104 791.9087,-600.104 788.4088,-610.1041 795.4088,-610.104"/>
</g>
<!-- displayPassage -->
<g id="node8" class="node">
<title>displayPassage</title>
<polygon fill="none" stroke="#000000" points="511.0155,-527.0137 304.8019,-527.0137 304.8019,-491.0137 511.0155,-491.0137 511.0155,-527.0137"/>
<text text-anchor="middle" x="407.9087" y="-505.5144" font-family="Palatino" font-size="14.00" fill="#000000">Passage at end of trail displays</text>
</g>
<!-- setPassageVars&#45;&gt;displayPassage -->
<g id="edge7" class="edge">
<title>setPassageVars&#45;&gt;displayPassage</title>
<path fill="none" stroke="#000000" d="M696.9873,-563.9687C641.0355,-553.332 570.1574,-539.8578 512.588,-528.9136"/>
<polygon fill="#000000" stroke="#000000" points="513.2135,-525.4699 502.7357,-527.0407 511.9061,-532.3468 513.2135,-525.4699"/>
</g>
<!-- idle -->
<g id="node9" class="node">
<title>idle</title>
<polygon fill="none" stroke="#000000" points="454.1639,-454.0137 361.6535,-454.0137 361.6535,-418.0137 454.1639,-418.0137 454.1639,-454.0137"/>
<text text-anchor="middle" x="407.9087" y="-432.5144" font-family="Palatino" font-size="14.00" fill="#000000">Engine idles</text>
</g>
<!-- displayPassage&#45;&gt;idle -->
<g id="edge8" class="edge">
<title>displayPassage&#45;&gt;idle</title>
<path fill="none" stroke="#000000" d="M407.9087,-490.9687C407.9087,-482.8965 407.9087,-473.19 407.9087,-464.1954"/>
<polygon fill="#000000" stroke="#000000" points="411.4088,-464.104 407.9087,-454.104 404.4088,-464.1041 411.4088,-464.104"/>
</g>
<!-- navRequested -->
<g id="node10" class="node">
<title>navRequested</title>
<polygon fill="none" stroke="#000000" points="499.615,-379.6123 316.2024,-379.6123 316.2024,-343.6123 499.615,-343.6123 499.615,-379.6123"/>
<text text-anchor="middle" x="407.9087" y="-358.113" font-family="Palatino" font-size="14.00" fill="#000000">Player clicks a passage link</text>
</g>
<!-- idle&#45;&gt;navRequested -->
<g id="edge9" class="edge">
<title>idle&#45;&gt;navRequested</title>
<path fill="none" stroke="#000000" d="M407.9087,-418.0032C407.9087,-409.5665 407.9087,-399.3165 407.9087,-389.8813"/>
<polygon fill="#000000" stroke="#000000" points="411.4088,-389.7148 407.9087,-379.7148 404.4088,-389.7149 411.4088,-389.7148"/>
</g>
<!-- goFuncCalled -->
<g id="node13" class="node">
<title>goFuncCalled</title>
<polygon fill="none" stroke="#000000" points="358.9466,-324.2109 218.8708,-324.2109 218.8708,-288.2109 358.9466,-288.2109 358.9466,-324.2109"/>
<text text-anchor="middle" x="288.9087" y="-302.7116" font-family="Palatino" font-size="14.00" fill="#000000">Story code calls go()</text>
</g>
<!-- idle&#45;&gt;goFuncCalled -->
<g id="edge13" class="edge">
<title>idle&#45;&gt;goFuncCalled</title>
<path fill="none" stroke="#000000" d="M361.6819,-420.5772C342.1131,-411.8455 320.6977,-398.9971 306.9087,-381.0137 296.7714,-367.7927 292.2393,-349.6982 290.257,-334.6174"/>
<polygon fill="#000000" stroke="#000000" points="293.701,-333.8824 289.2205,-324.2816 286.7359,-334.581 293.701,-333.8824"/>
</g>
<!-- restart -->
<g id="node16" class="node">
<title>restart</title>
<polygon fill="none" stroke="#000000" points="682.1043,-379.6123 517.7131,-379.6123 517.7131,-343.6123 682.1043,-343.6123 682.1043,-379.6123"/>
<text text-anchor="middle" x="599.9087" y="-358.113" font-family="Palatino" font-size="14.00" fill="#000000">Story code calls restart()</text>
</g>
<!-- idle&#45;&gt;restart -->
<g id="edge18" class="edge">
<title>idle&#45;&gt;restart</title>
<path fill="none" stroke="#000000" d="M454.3865,-418.0032C481.3084,-407.5708 515.3856,-394.3656 543.7948,-383.3568"/>
<polygon fill="#000000" stroke="#000000" points="545.1337,-386.5917 553.1934,-379.7148 542.6043,-380.0646 545.1337,-386.5917"/>
</g>
<!-- changeLiveInput -->
<g id="node18" class="node">
<title>changeLiveInput</title>
<polygon fill="none" stroke="#000000" points="259.4995,-380.9155 76.3178,-380.9155 76.3178,-342.3091 259.4995,-342.3091 259.4995,-380.9155"/>
<text text-anchor="middle" x="167.9087" y="-365.8137" font-family="Palatino" font-size="14.00" fill="#000000">Player changes a live input</text>
<text text-anchor="middle" x="167.9087" y="-350.4123" font-family="Palatino" font-size="14.00" fill="#000000">or story code calls refresh()</text>
</g>
<!-- idle&#45;&gt;changeLiveInput -->
<g id="edge21" class="edge">
<title>idle&#45;&gt;changeLiveInput</title>
<path fill="none" stroke="#000000" d="M361.7356,-424.6433C335.7733,-417.9919 302.8596,-409.1286 273.9087,-400.0137 258.9765,-395.3124 243.0282,-389.8005 228.1561,-384.4432"/>
<polygon fill="#000000" stroke="#000000" points="229.1541,-381.0819 218.56,-380.9551 226.7627,-387.6608 229.1541,-381.0819"/>
</g>
<!-- checkRequired -->
<g id="node11" class="node">
<title>checkRequired</title>
<polygon fill="none" stroke="#000000" points="446.9087,-270.4158 340.6585,-216.0068 446.9087,-161.5979 553.1588,-216.0068 446.9087,-270.4158"/>
<text text-anchor="middle" x="446.9087" y="-227.9089" font-family="Palatino" font-size="14.00" fill="#000000">Are any</text>
<text text-anchor="middle" x="446.9087" y="-212.5075" font-family="Palatino" font-size="14.00" fill="#000000">required fields</text>
<text text-anchor="middle" x="446.9087" y="-197.1062" font-family="Palatino" font-size="14.00" fill="#000000">blank?</text>
</g>
<!-- navRequested&#45;&gt;checkRequired -->
<g id="edge10" class="edge">
<title>navRequested&#45;&gt;checkRequired</title>
<path fill="none" stroke="#000000" d="M412.7692,-343.4657C417.438,-326.0348 424.7454,-298.7529 431.4035,-273.8949"/>
<polygon fill="#000000" stroke="#000000" points="434.8065,-274.7176 434.013,-264.1525 428.0448,-272.9065 434.8065,-274.7176"/>
</g>
<!-- blockNav -->
<g id="node12" class="node">
<title>blockNav</title>
<polygon fill="none" stroke="#000000" points="752.154,-111.7046 581.6634,-111.7046 581.6634,-73.0981 752.154,-73.0981 752.154,-111.7046"/>
<text text-anchor="middle" x="666.9087" y="-96.6027" font-family="Palatino" font-size="14.00" fill="#000000">Navigation is blocked</text>
<text text-anchor="middle" x="666.9087" y="-81.2014" font-family="Palatino" font-size="14.00" fill="#000000">and browser shows error</text>
</g>
<!-- checkRequired&#45;&gt;blockNav -->
<g id="edge11" class="edge">
<title>checkRequired&#45;&gt;blockNav</title>
<path fill="none" stroke="#000000" d="M497.6574,-187.494C535.7939,-166.0673 587.4739,-137.0313 623.6584,-116.7013"/>
<polygon fill="#000000" stroke="#000000" points="625.5025,-119.6798 632.5063,-111.7301 622.0737,-113.577 625.5025,-119.6798"/>
<text text-anchor="middle" x="601.9087" y="-132.6027" font-family="Times,serif" font-size="14.00" fill="#000000">no</text>
</g>
<!-- setInputs -->
<g id="node14" class="node">
<title>setInputs</title>
<polygon fill="none" stroke="#000000" points="553.5777,-110.4014 340.2397,-110.4014 340.2397,-74.4014 553.5777,-74.4014 553.5777,-110.4014"/>
<text text-anchor="middle" x="446.9087" y="-88.9021" font-family="Palatino" font-size="14.00" fill="#000000">State set with contents of inputs</text>
</g>
<!-- checkRequired&#45;&gt;setInputs -->
<g id="edge15" class="edge">
<title>checkRequired&#45;&gt;setInputs</title>
<path fill="none" stroke="#000000" d="M446.9087,-161.7917C446.9087,-147.5435 446.9087,-132.7491 446.9087,-120.4996"/>
<polygon fill="#000000" stroke="#000000" points="450.4088,-120.4677 446.9087,-110.4677 443.4088,-120.4677 450.4088,-120.4677"/>
<text text-anchor="middle" x="456.2397" y="-132.6027" font-family="Times,serif" font-size="14.00" fill="#000000">yes</text>
</g>
<!-- blockNav&#45;&gt;idle -->
<g id="edge12" class="edge">
<title>blockNav&#45;&gt;idle</title>
<path fill="none" stroke="#000000" d="M669.2724,-111.8759C676.8395,-175.0177 699.4839,-370.6114 690.9087,-381.0137 662.7443,-415.1787 538.3338,-428.3901 464.1664,-433.2919"/>
<polygon fill="#000000" stroke="#000000" points="463.8097,-429.8074 454.0498,-433.9298 464.2503,-436.7935 463.8097,-429.8074"/>
</g>
<!-- goFuncCalled&#45;&gt;setInputs -->
<g id="edge14" class="edge">
<title>goFuncCalled&#45;&gt;setInputs</title>
<path fill="none" stroke="#000000" d="M290.1621,-287.8804C293.0241,-258.4462 302.2909,-200.0745 331.9087,-161.8027 347.3936,-141.7933 370.4101,-126.2784 391.7925,-115.0425"/>
<polygon fill="#000000" stroke="#000000" points="393.4744,-118.1143 400.8296,-110.4885 390.3243,-111.8631 393.4744,-118.1143"/>
</g>
<!-- addPassage -->
<g id="node15" class="node">
<title>addPassage</title>
<polygon fill="none" stroke="#000000" points="886.1481,-36 677.6693,-36 677.6693,0 886.1481,0 886.1481,-36"/>
<text text-anchor="middle" x="781.9087" y="-14.5007" font-family="Palatino" font-size="14.00" fill="#000000">New passage appended to trail</text>
</g>
<!-- setInputs&#45;&gt;addPassage -->
<g id="edge16" class="edge">
<title>setInputs&#45;&gt;addPassage</title>
<path fill="none" stroke="#000000" d="M528.0028,-74.3909C577.109,-63.4847 639.8593,-49.5483 690.6911,-38.2588"/>
<polygon fill="#000000" stroke="#000000" points="691.6877,-41.6229 700.691,-36.0379 690.17,-34.7894 691.6877,-41.6229"/>
</g>
<!-- addPassage&#45;&gt;setPassageVars -->
<g id="edge17" class="edge">
<title>addPassage&#45;&gt;setPassageVars</title>
<path fill="none" stroke="#000000" d="M866.1396,-36.1237C892.5343,-47.1126 914.9087,-64.6208 914.9087,-92.4014 914.9087,-509.0137 914.9087,-509.0137 914.9087,-509.0137 914.9087,-532.4798 898.1481,-548.5686 877.001,-559.5291"/>
<polygon fill="#000000" stroke="#000000" points="875.2532,-556.4838 867.7055,-563.919 878.2425,-562.8134 875.2532,-556.4838"/>
</g>
<!-- unsetAll -->
<g id="node17" class="node">
<title>unsetAll</title>
<polygon fill="none" stroke="#000000" points="886.652,-235.3101 697.1654,-235.3101 697.1654,-196.7036 886.652,-196.7036 886.652,-235.3101"/>
<text text-anchor="middle" x="791.9087" y="-220.2082" font-family="Palatino" font-size="14.00" fill="#000000">All set variables are cleared,</text>
<text text-anchor="middle" x="791.9087" y="-204.8068" font-family="Palatino" font-size="14.00" fill="#000000">including trail</text>
</g>
<!-- restart&#45;&gt;unsetAll -->
<g id="edge19" class="edge">
<title>restart&#45;&gt;unsetAll</title>
<path fill="none" stroke="#000000" d="M623.8374,-343.4657C657.6689,-317.8092 719.6424,-270.8109 758.1439,-241.6128"/>
<polygon fill="#000000" stroke="#000000" points="760.6014,-244.1418 766.4544,-235.3104 756.3716,-238.5642 760.6014,-244.1418"/>
</g>
<!-- unsetAll&#45;&gt;setPassageVars -->
<g id="edge20" class="edge">
<title>unsetAll&#45;&gt;setPassageVars</title>
<path fill="none" stroke="#000000" d="M791.9087,-235.3201C791.9087,-263.2047 791.9087,-316.3634 791.9087,-361.6123 791.9087,-509.0137 791.9087,-509.0137 791.9087,-509.0137 791.9087,-523.7141 791.9087,-540.0796 791.9087,-553.5835"/>
<polygon fill="#000000" stroke="#000000" points="788.4088,-553.7133 791.9087,-563.7133 795.4088,-553.7134 788.4088,-553.7133"/>
</g>
<!-- setLiveInputs -->
<g id="node19" class="node">
<title>setLiveInputs</title>
<polygon fill="none" stroke="#000000" points="231.7261,-234.0068 .0912,-234.0068 .0912,-198.0068 231.7261,-198.0068 231.7261,-234.0068"/>
<text text-anchor="middle" x="115.9087" y="-212.5075" font-family="Palatino" font-size="14.00" fill="#000000">State set with contents of all inputs</text>
</g>
<!-- changeLiveInput&#45;&gt;setLiveInputs -->
<g id="edge22" class="edge">
<title>changeLiveInput&#45;&gt;setLiveInputs</title>
<path fill="none" stroke="#000000" d="M161.0035,-342.277C151.9585,-316.95 136.042,-272.3823 125.7405,-243.5369"/>
<polygon fill="#000000" stroke="#000000" points="129.0108,-242.2873 122.3514,-234.047 122.4186,-244.6416 129.0108,-242.2873"/>
</g>
<!-- setLiveInputs&#45;&gt;displayPassage -->
<g id="edge23" class="edge">
<title>setLiveInputs&#45;&gt;displayPassage</title>
<path fill="none" stroke="#000000" d="M101.179,-234.2019C77.0042,-266.4144 34.6605,-334.4636 66.9087,-381.0137 96.7015,-424.0195 230.4478,-464.9076 321.3154,-488.4481"/>
<polygon fill="#000000" stroke="#000000" points="320.5143,-491.8559 331.0704,-490.9515 322.2543,-485.0756 320.5143,-491.8559"/>
</g>
</g>
</svg>
